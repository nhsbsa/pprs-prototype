{% extends 'layout.html' %}

{% block pageTitle %}
Quarterly collection dropdown - expander list
{% endblock %}

{% block content %}
<div class="nhsuk-back-link">

    <a class="nhsuk-back-link__link nhsuk-u-margin-bottom-5" href="supplier-contact">
        <svg class="nhsuk-icon nhsuk-icon__chevron-left" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" height="24" width="24">
            <path d="M8.5 12c0-.3.1-.5.3-.7l5-5c.4-.4 1-.4 1.4 0s.4 1 0 1.4L10.9 12l4.3 4.3c.4.4.4 1 0 1.4s-1 .4-1.4 0l-5-5c-.2-.2-.3-.4-.3-.7z"></path>
        </svg>
        Go back to request dashboard</a>
</div>

        <h1><span class="nhsuk-caption-l">
     <span id="request-date">October 2023</span> - fourth request
     <span class="nhsuk-u-visually-hidden">: </span>
   </span>
            Additional suppliers
        </h1>

<div class="nhsuk-form-group">
    <p></p>


    <p>Each additional supplier's template only includes products that are in their own portfolio. Every additional supplier needs to receive their own template. First you need to choose the suppliers who will be receiving a group email. Selecting the &#39;Send group email&#39; link will send that supplier's template to all contacts for that supplier, but sent as a group.</p>
    <p>If you need to make any changes to the template, the template must be sent manually. If you do not pick a supplier for the group email, then they will appear in the 'Additional suppliers manual contact' section. In this section, you can download the template, make changes and send it from your own email address. Only do this if a supplier needs a bespoke template.</p>

    <div class="nhsuk-action-link nhsuk-u-margin-top-5">
        <a class="nhsuk-action-link__link nhsuk-link--no-visited-state" href="../auto-email-additional/choose-additional-suppliers">
            <svg class="nhsuk-icon nhsuk-icon__arrow-right-circle" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" width="36" height="36">
                <path d="M0 0h24v24H0z" fill="none"></path>
                <path d="M12 2a10 10 0 0 0-9.95 9h11.64L9.74 7.05a1 1 0 0 1 1.41-1.41l5.66 5.65a1 1 0 0 1 0 1.42l-5.66 5.65a1 1 0 0 1-1.41 0 1 1 0 0 1 0-1.41L13.69 13H2.05A10 10 0 1 0 12 2z"></path>
            </svg>
            <span class="nhsuk-action-link__text">Send a group email</span>
        </a>
    </div>
    
<!--    <fieldset class="nhsuk-fieldset nhsuk-u-margin-bottom-3 nhsuk-u-margin-top-3">-->
<!--        <details class="nhsuk-details">-->
<!--            <summary class="nhsuk-details__summary">-->
<!--    <span class="nhsuk-details__summary-text">-->
<!--      Search for a specific supplier-->
<!--    </span>-->
<!--            </summary>-->

<!--            <div class="nhsuk-details__text">-->

<!--                <div class="nhsuk-form-group">-->
<!--                    <label class="nhsuk-label" for="example">-->
<!--                        Supplier search-->
<!--                    </label>-->
<!--                    <div class="nhsuk-hint" id="example-with-hint-text-hint">-->
<!--                        You can search the additional suppliers' template correspondence list for a specific supplier.-->
<!--                    </div>-->
<!--                    <input class="nhsuk-input" id="example" name="example" type="text">-->
<!--                </div>-->

<!--            <a class="nhsuk-button nhsuk-u-margin-top-6"-->
<!--               id="continue-button" type="submit" href="#">-->
<!--                Refine search-->
<!--            </a>-->
<!--            <a href="#" class="nhsuk-button nhsuk-button&#45;&#45;secondary nhsuk-u-margin-left-5 nhsuk-u-margin-top-6">Reset search</a>-->
<!--            </div>-->
<!--        </details>-->

<!--    </fieldset>-->

</div>

<!--<div class="nhsuk-body-m flex&#45;&#45;space-between" style="display: flex">-->
<!--    <div class="nhsuk-u-visually-hidden">Currently viewing</div>-->
<!--    <div id="pageAndResultCount">Page 1 of 1 (5 results)</div>-->
<!--</div>-->

<!--<table class="nhsuk-table nhsuk-table-responsive">-->
<!--    <caption class="nhsuk-table__caption">Additional suppliers list</caption>-->
<!--    <thead role="rowgroup" class="nhsuk-table__head">-->
<!--    <tr role="row">-->
<!--        <th role="columnheader" class="" scope="col">-->
<!--            Supplier-->
<!--        </th>-->
<!--        <th role="columnheader" class="" scope="col">-->
<!--            Sent on-->
<!--        </th>-->
<!--        <th role="columnheader" class="" scope="col">-->
<!--            Total reminders-->
<!--        </th>-->
<!--        <th role="columnheader" class="" scope="col">-->
<!--            Last reminder-->
<!--        </th>-->
<!--        <th role="columnheader" class="" scope="col">-->
<!--            Reply on-->
<!--        </th>-->
<!--        <th role="columnheader" class="" scope="col">-->
<!--            Action-->
<!--        </th>-->
<!--    </tr>-->
<!--    </thead>-->
<!--    <tbody class="nhsuk-table__body">-->
<!--    <tr role="row" class="nhsuk-table__row">-->
<!--        <td class="nhsuk-table__cell ">-->
<!--            <span class="nhsuk-table-responsive__heading">Supplier</span>Amgen Ltd</td>-->
<!--        <td role="cell" class="nhsuk-table__cell" id="date-sent">-->
<!--            <span class="nhsuk-table-responsive__heading">Sent on</span>-->
<!--            <span class="nhsuk-u-visually-hidden" id="hidden-sent">Template has not been sent</span>-->
<!--        </td>-->
<!--        <td role="cell" class="nhsuk-table__cell">-->
<!--            <span class="nhsuk-table-responsive__heading">Total reminders</span>0</td>-->
<!--        <td role="cell" class="nhsuk-table__cell" id="reminder-sent">-->
<!--            <span class="nhsuk-table-responsive__heading">Last reminder</span>-->
<!--            <span class="nhsuk-u-visually-hidden" id="hidden-reminder">Reminder has not been sent</span></td>-->
<!--        <td role="cell" class="nhsuk-table__cell" id="reply-in">-->
<!--            <span class="nhsuk-table-responsive__heading">Replied on</span>-->
<!--            <span class="nhsuk-u-visually-hidden" id="hidden-reply">Reply has not been received</span></td>-->

<!--        <td class="nhsuk-table__cell ">-->
<!--            <span class="nhsuk-table-responsive__heading">Action</span>-->
<!--            <a class="nhsuk-link nhsuk-link&#45;&#45;no-visited-state" href="additional-supplier-view-tabs" id="supplier-update">Update</a></td>-->
<!--    </tr>-->
<!--    <tr role="row" class="nhsuk-table__row">-->
<!--        <td class="nhsuk-table__cell"><span class="nhsuk-table-responsive__heading">Supplier</span>-->
<!--            Boehringer Ingelheim Ltd</td>-->
<!--        <td role="cell" class="nhsuk-table__cell" id="date-sent-1">-->
<!--            <span class="nhsuk-table-responsive__heading">Sent on</span>-->
<!--            <span class="nhsuk-u-visually-hidden" id="hidden-sent-2">Template has not been sent</span>-->
<!--        </td>-->
<!--        <td role="cell" class="nhsuk-table__cell">-->
<!--            <span class="nhsuk-table-responsive__heading">Total reminders</span>0</td>-->
<!--        <td role="cell" class="nhsuk-table__cell" id="reminder-sent-1">-->
<!--            <span class="nhsuk-table-responsive__heading">Last reminder</span>-->
<!--            <span class="nhsuk-u-visually-hidden" id="hidden-reminder-1">Reminder has not been sent</span></td>-->
<!--        <td role="cell" class="nhsuk-table__cell" id="reply-in-1">-->
<!--            <span class="nhsuk-table-responsive__heading">Replied on</span>-->
<!--            <span class="nhsuk-u-visually-hidden" id="hidden-reply-1">Reply has not been received</span></td>-->
<!--        <td class="nhsuk-table__cell ">-->
<!--            <span class="nhsuk-table-responsive__heading">Action</span>-->
<!--            Update</td>-->
<!--    </tr>-->
<!--    <tr role="row" class="nhsuk-table__row">-->
<!--        <td class="nhsuk-table__cell"><span class="nhsuk-table-responsive__heading">Supplier</span>Cambridge Healthcare Supplies Ltd</td>-->
<!--        <td role="cell" class="nhsuk-table__cell" id="date-sent-2">-->
<!--            <span class="nhsuk-table-responsive__heading">Sent on</span>-->
<!--            <span class="nhsuk-u-visually-hidden" id="hidden-sent-3">Template has not been sent</span>-->
<!--        </td>-->
<!--        <td role="cell" class="nhsuk-table__cell">-->
<!--            <span class="nhsuk-table-responsive__heading">Total reminders</span>0</td>-->
<!--        <td role="cell" class="nhsuk-table__cell" id="reminder-sent-2">-->
<!--            <span class="nhsuk-table-responsive__heading">Last reminder</span>-->
<!--            <span class="nhsuk-u-visually-hidden" id="hidden-reminder-2">Reminder has not been sent</span></td>-->
<!--        <td role="cell" class="nhsuk-table__cell" id="reply-in-2">-->
<!--            <span class="nhsuk-table-responsive__heading">Replied on</span>-->
<!--            <span class="nhsuk-u-visually-hidden" id="hidden-reply-2">Reply has not been received</span></td>-->
<!--        <td class="nhsuk-table__cell ">-->
<!--            <span class="nhsuk-table-responsive__heading">Action</span>-->
<!--            Update</td>-->
<!--    </tr>-->
<!--    <tr role="row" class="nhsuk-table__row">-->
<!--        <td class="nhsuk-table__cell"><span class="nhsuk-table-responsive__heading">Supplier</span>Ennogen Pharma Ltd</td>-->
<!--        <td role="cell" class="nhsuk-table__cell" id="date-sent-3">-->
<!--            <span class="nhsuk-table-responsive__heading">Sent on</span>-->
<!--            <span class="nhsuk-u-visually-hidden" id="hidden-sent-4">Template has not been sent</span>-->
<!--        </td>-->
<!--        <td role="cell" class="nhsuk-table__cell">-->
<!--            <span class="nhsuk-table-responsive__heading">Total reminders</span>0</td>-->
<!--        <td role="cell" class="nhsuk-table__cell" id="reminder-sent-3">-->
<!--            <span class="nhsuk-table-responsive__heading">Last reminder</span>-->
<!--            <span class="nhsuk-u-visually-hidden" id="hidden-reminder-3">Reminder has not been sent</span></td>-->
<!--        <td role="cell" class="nhsuk-table__cell" id="reply-in-3">-->
<!--            <span class="nhsuk-table-responsive__heading">Replied</span>-->
<!--            <span class="nhsuk-u-visually-hidden" id="hidden-reply-3">Reply has not been received</span></td>-->
<!--        <td class="nhsuk-table__cell ">-->
<!--            <span class="nhsuk-table-responsive__heading">Action</span>-->
<!--            Update</td>-->
<!--    </tr>-->
<!--    <tr role="row" class="nhsuk-table__row">-->
<!--        <td class="nhsuk-table__cell"><span class="nhsuk-table-responsive__heading">Supplier</span>Indivior UK Ltd</td>-->
<!--        <td role="cell" class="nhsuk-table__cell" id="date-sent-4">-->
<!--            <span class="nhsuk-table-responsive__heading">Sent on</span>-->
<!--            <span class="nhsuk-u-visually-hidden" id="hidden-sent-5">Template has not been sent</span>-->
<!--        </td>-->
<!--        <td role="cell" class="nhsuk-table__cell">-->
<!--            <span class="nhsuk-table-responsive__heading">Total reminders</span>-->
<!--            <span id="reminder-number">0</span></td>-->
<!--        <td role="cell" class="nhsuk-table__cell" id="reminder-sent-4">-->
<!--            <span class="nhsuk-table-responsive__heading">Last reminder</span>-->
<!--            <span class="nhsuk-u-visually-hidden" id="hidden-reminder-4">Reminder has not been sent</span>-->
<!--            <span id="last-reminder"></span></td>-->
<!--        <td role="cell" class="nhsuk-table__cell" id="reply-in-manual">-->
<!--            <span class="nhsuk-table-responsive__heading">Replied on</span>-->
<!--            <span class="nhsuk-u-visually-hidden" id="hidden-reply-4">Reply has not been received</span></td>-->
<!--        <td class="nhsuk-table__cell ">-->
<!--            <span class="nhsuk-table-responsive__heading">Action</span>-->
<!--            <a class="nhsuk-link nhsuk-link&#45;&#45;no-visited-state" href="additional-supplier-view-tabs-manual" id="supplier-update-manual">Update</a></td>-->
<!--    </tr>-->
<!--    <tr role="row" class="nhsuk-table__row">-->
<!--        <td class="nhsuk-table__cell"><span class="nhsuk-table-responsive__heading">Supplier</span>Kora Healthcare Ltd</td>-->
<!--        <td role="cell" class="nhsuk-table__cell" id="date-sent-5">-->
<!--            <span class="nhsuk-table-responsive__heading">Sent on</span>-->
<!--            <span class="nhsuk-u-visually-hidden" id="hidden-sent-6">Template has not been sent</span>-->
<!--        </td>-->
<!--        <td role="cell" class="nhsuk-table__cell">-->
<!--            <span class="nhsuk-table-responsive__heading">Total reminders</span>-->
<!--            <span id="reminder-number-1">0</span></td>-->
<!--        <td role="cell" class="nhsuk-table__cell" id="reminder-sent-5">-->
<!--            <span class="nhsuk-table-responsive__heading">Last reminder</span>-->
<!--            <span class="nhsuk-u-visually-hidden" id="hidden-reminder-5">Reminder has not been sent</span>-->
<!--            <span id="last-reminder-1"></span></td>-->
<!--        <td role="cell" class="nhsuk-table__cell" id="reply-in-manual-1">-->
<!--            <span class="nhsuk-table-responsive__heading">Replied on</span>-->
<!--            <span class="nhsuk-u-visually-hidden" id="hidden-reply-5">Reply has not been received</span></td>-->
<!--        <td class="nhsuk-table__cell ">-->
<!--            <span class="nhsuk-table-responsive__heading">Action</span>-->
<!--            Update</td>-->
<!--    </tr>-->
<!--    <tr role="row" class="nhsuk-table__row">-->
<!--        <td class="nhsuk-table__cell"><span class="nhsuk-table-responsive__heading">Supplier</span>Martindale Pharmaceuticals Ltd</td>-->
<!--        <td role="cell" class="nhsuk-table__cell" id="date-sent-6">-->
<!--            <span class="nhsuk-table-responsive__heading">Sent on</span>-->
<!--            <span class="nhsuk-u-visually-hidden" id="hidden-sent-7">Template has not been sent</span>-->
<!--        </td>-->
<!--        <td role="cell" class="nhsuk-table__cell">-->
<!--            <span class="nhsuk-table-responsive__heading">Total reminders</span>-->
<!--            <span id="reminder-number-2">0</span></td>-->
<!--        <td role="cell" class="nhsuk-table__cell" id="reminder-sent-6">-->
<!--            <span class="nhsuk-table-responsive__heading">Last reminder</span>-->
<!--            <span class="nhsuk-u-visually-hidden" id="hidden-reminder-6">Reminder has not been sent</span>-->
<!--            <span id="last-reminder-2"></span></td>-->
<!--        <td role="cell" class="nhsuk-table__cell" id="reply-in-manual-2">-->
<!--            <span class="nhsuk-table-responsive__heading">Replied on</span>-->
<!--            <span class="nhsuk-u-visually-hidden" id="hidden-reply-6">Reply has not been received</span></td>-->
<!--        <td class="nhsuk-table__cell ">-->
<!--            <span class="nhsuk-table-responsive__heading">Action</span>-->
<!--            Update</td>-->
<!--    </tr>-->
<!--    </tbody>-->
<!--</table>-->

<!--<nav class="govuk-pagination nhsuk-u-margin-bottom-7 nhsuk-u-margin-top-5" role="navigation" aria-label="results">-->
<!--    <div class="govuk-pagination__prev">-->
<!--        <a class="govuk-link govuk-pagination__link" href="#" rel="prev">-->
<!--            <svg class="govuk-pagination__icon govuk-pagination__icon&#45;&#45;prev" xmlns="http://www.w3.org/2000/svg" height="13" width="15" aria-hidden="true" focusable="false" viewBox="0 0 15 13">-->
<!--                <path d="m6.5938-0.0078125-6.7266 6.7266 6.7441 6.4062 1.377-1.449-4.1856-3.9768h12.896v-2h-12.984l4.2931-4.293-1.414-1.414z"></path>-->
<!--            </svg>-->
<!--            <span class="govuk-pagination__link-title">Previous</span></a>-->
<!--    </div>-->
<!--    <ul class="govuk-pagination__list">-->
<!--        <li class="govuk-pagination__item">-->
<!--            <a class="govuk-link govuk-pagination__link" href="#" aria-label="Page 1">-->
<!--                1-->
<!--            </a>-->
<!--        </li>-->
<!--        <li class="govuk-pagination__item govuk-pagination__item&#45;&#45;current">-->
<!--            <a class="govuk-link govuk-pagination__link" href="#" aria-label="Page 2" aria-current="page">-->
<!--                2-->
<!--            </a>-->
<!--        </li>-->
<!--        <li class="govuk-pagination__item">-->
<!--            <a class="govuk-link govuk-pagination__link" href="#" aria-label="Page 3">-->
<!--                3-->
<!--            </a>-->
<!--        </li>-->
<!--    </ul>-->
<!--    <div class="govuk-pagination__next">-->
<!--        <a class="govuk-link govuk-pagination__link" href="#" rel="next"> <span class="govuk-pagination__link-title">Next</span> <svg class="govuk-pagination__icon govuk-pagination__icon&#45;&#45;next" xmlns="http://www.w3.org/2000/svg" height="13" width="15" aria-hidden="true" focusable="false" viewBox="0 0 15 13">-->
<!--            <path d="m8.107-0.0078125-1.4136 1.414 4.2926 4.293h-12.986v2h12.896l-4.1855 3.9766 1.377 1.4492 6.7441-6.4062-6.7246-6.7266z"></path>-->
<!--        </svg></a>-->
<!--    </div>-->
<!--</nav>-->

<script>
    console.log(localStorage);

    let dateEmailSent = localStorage.getItem("has-sent-email-additional");
    let dateReplyReceived = localStorage.getItem("supplier-has-replied-additional");
    let dateReplyReceivedManual = localStorage.getItem("supplier-has-replied-manual-additional");
    let dateSent = new Date();

    let day = dateSent.getDate();
    let month = dateSent.getMonth() + 1;
    let year = dateSent.getFullYear();

    if (day < 10) day = '0' + day;
    if (month < 10) month = '0' + month;

    let currentDate = `${day}-${month}-${year}`;
    console.log(currentDate);

    if (dateReplyReceived == "yes") {
       document.getElementById("reply-in").innerHTML = currentDate;
       document.getElementById("supplier-update").innerHTML = 'View';
       if (document.getElementById("hidden-reply")) {
       document.getElementById("hidden-reply").style.display = "none";
       }
    }

    if (dateReplyReceivedManual == "yes") {
       document.getElementById("reply-in-manual").innerHTML = currentDate;
       document.getElementById("supplier-update-manual").innerHTML = 'View';
       if (document.getElementById("hidden-reply-5")) {
       document.getElementById("hidden-reply-5").style.display = "none";
       }
    }

    if (localStorage.getItem("group-email-sent-additional") == "yes") {
        document.getElementById("hidden-sent").textContent = currentDate;
        document.getElementById("hidden-sent-3").textContent = currentDate;
        document.getElementById("hidden-sent-4").textContent = currentDate;
        document.getElementById("hidden-sent-2").textContent = currentDate;
        document.getElementById("hidden-sent").classList.remove("nhsuk-u-visually-hidden");
        document.getElementById("hidden-sent-3").classList.remove("nhsuk-u-visually-hidden");
        document.getElementById("hidden-sent-4").classList.remove("nhsuk-u-visually-hidden");
        document.getElementById("hidden-sent-2").classList.remove("nhsuk-u-visually-hidden");
    }

    if (localStorage.getItem("has-sent-email-manual-additional") == "yes") {
        document.getElementById("hidden-sent-5").textContent = currentDate;
        document.getElementById("hidden-sent-5").classList.remove("nhsuk-u-visually-hidden");
    }

    if (localStorage.getItem("reminder-one-sent-additional") == "yes" && (!localStorage.getItem("reminder-two-sent-additional") || localStorage.getItem("reminder-two-sent-additional") == "no")) {
       document.getElementById("reminder-number").textContent = "1";
       document.getElementById("last-reminder").textContent = currentDate;
    } else if (localStorage.getItem("reminder-one-sent-additional") == "yes" && localStorage.getItem("reminder-two-sent-additional") == "yes") {
       document.getElementById("reminder-number").textContent = "2";
       document.getElementById("last-reminder").textContent = currentDate;
    }

    let requestDate = document.getElementById("request-date");
       var monthNamesTitle = ["January", "February", "March", "April", "May","June","July", "August", "September", "October", "November","December"];

        var dt = new Date();
        var dayTodayt = dt.getDate();
        var monthTodayt = monthNamesTitle[dt.getMonth()];
        var yearTodayt = dt.getFullYear();

        requestDate.innerHTML = monthTodayt + ' ' + yearTodayt;

</script>

{% endblock %}